### Question

如果你的网关服务被完全破坏，那么攻击者可以从内存中收集哪些数据？

### Answer

我刚刚检查了一下我自己的 BFF，然后发现不仅仅在内存中存在业务数据，其次比较重要的数据便是各种秘钥或者 API Key 了（我们没有使用 HSM）。一般来说，如果攻击者能够进入到网关服务中，或者已经完成了提权，那么这台机器上的所有的东西几乎都可以被获取，尽管内部我们可能有容器或者其他的运行环境，这一版都是时间问题。

我们可以使用混淆或者牺牲性能的方式来以避免变量保持数据，但对于 heap dump 来说这也没有太多的意义。因此，良好的解决方案是我们应该应用“纵深防御”策略，从基础设施到软件层面进行多层防御，只允许那些获得授权的人进行访问，或者更极端一些，将服务器的 SSH 全部关闭。

### Reference
- [Defense in depth](https://en.wikipedia.org/wiki/Defense_in_depth_(computing))
