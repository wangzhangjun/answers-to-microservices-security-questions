### Question

如果有入侵者进入内网，他能够窃取服务之间的通信吗？

### Answer

目前来看，对于大多数的中型企业，其内网的拓扑已经非常复杂了，往往我们会根据业务小组或者产品线将其划分为不同的子网，然后实施 ACL，当然在如此复杂的环境下实施安全方法就比较难了，也存在这种就算是安全方法进行了落地，但是也很难改变。于是相对可以接受的安全实践就变成了在网络边界进行严格的防御，并且假设内网是安全的，当然这个观点不是说内网安全不重要，只是一个较为妥协的安全方法。近些年随着 DevOps 运动的发展，以及基础设施治理工具的增强，我们已经可以在内网内灵活的进行安全配置，并且实现 as-code 与自动化式的管理，这也就为了内网安全提供了技术基础。

对于入侵者来说，进入网络窃取通信自然是有很多方法的，例如嗅探关键节点，使用 ARP 欺骗，DNS 污染，或者仅仅是进行代码的逆向，我们往往对部署在内网内的代码不进行任何防护，特别是脚本语言，所以分析代码可以获取很多极其敏感的信息，例如 API Keys，或者数据库的身份凭据，这样就可以不费吹灰之力进入到数据库去进行数据窃取了。目前来说，除了实施深度防御之外，全链路的 TLS/SSL 也是必须的，再加上合理的资源访问控制，配置加密，秘钥管理，代码的混淆或者端点安全（例如禁止 ssh 与关闭 22 端口等）等，这些安全方法都是能够发挥作用的。当然这些安全方法都不是新东西，在微服务的语境下，自动化的进行配置和监控永远是最大的挑战。

### Reference

- [Defense in depth](https://en.wikipedia.org/wiki/Defense_in_depth_(computing))
- [TLS 1.3](https://tools.ietf.org/html/rfc8446)
