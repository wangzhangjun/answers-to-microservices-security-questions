### Question

你还在只使用网络边界来保护你的系统吗？

### Answer

对于大多数的企业安全实践中，把所有的资源放在内网中，然后在网络边界处确保安全的做法已经有点过时了。往往我们会有很强的防火墙以及 ACL 来保证网络的安全，就如同中世纪城堡的吊桥一般，对于一个有办法进入内网的攻击者来说是很不奏效的——一旦被入侵，几乎满盘皆输。我们往往忽略内网内的资源的安全设置，很多服务只需要知道一个地址就可以互相调用，数据库的安全也降低到只有个别几个的账户进行设置等，这自然是不可取的。同时，面向数据安全的威胁日益增多，对于攻击者来说，如果可以在无感知的情况下获取业务数据，其收益是大于破坏或者非法使用这些资源的。

在目前，我们认为并不能依靠尝试的建立一个假设安全的内网来保证系统的安全，例如使用防火墙或者网关上的一些设置，往往这些安全方法只是工作在第四层或者以下的网络中。所以实施深度防御是一个常见的选择，不仅我们需要检查已有的网络设置，同时可能会在应用层加入更多的安全机制。对于微服务架构来说，通常我们将单块应用分解成功能独立的服务，每个服务去管理每个服务自己的资源，显而易见的是，这些服务自己的资源是不需要被其他服务所感知的。同样，运行服务的实例增多，所以攻击面上是可能大于单块应用的，在管理上也更加复杂。对于实践微服务，无论是采用哪种平台或者服务网格，自动化是一个必要条件，因为我们必须要考虑如何监控这些服务，特别是在安全方面：例如可否加入数据库非法链接的警报等。更为常见的是，我们的服务往往部署在各种云平台之上，使用平台本身提供的安全能力就尤为重要了，对于应用层的安全例如身份安全之类，我们还是需要依靠自己的实现。

### Reference
- [Defense in depth](https://en.wikipedia.org/wiki/Defense_in_depth_(computing))
- [Security in the Cloud](https://www.schneier.com/blog/archives/2006/02/security_in_the.html)
- [BeyondCorp: A New Approach to Enterprise Security](https://ai.google/research/pubs/pub43231)
